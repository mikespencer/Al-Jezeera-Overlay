/* 2013-09-13 */
var wpAd=wpAd||{};!function(a){"use strict";function b(b){this.configure(b),this.$container=a(this.config.container),this.$hpContainer=a(this.config.hpContainer),this.$overlayContainer=a(this.config.overlayContainer);var c=this;d>=this.config.minFlashVer?(this.$container.addClass("enabled"),this.config.auto?(this.overlay=this.getOverlay(),this.expand(),this.timerRunning=!0,this.autoCloseTimer=setTimeout(function(){c.timerRunning=!1,c.collapse(!1)},this.config.autoCloseTimeout)):(this.hp=this.getHalfpage(),this.renderHalfpage())):this.renderBackupImage()}var c={clickTrack:"",clickTrackEsc:"",auto:!0,autoCloseTimeout:7e3,minFlashVer:9,container:".ajam-overlay-container",hpContainer:".ajam-overlay-hp",overlayContainer:".ajam-overlay-overlay",tracking:{expand:"",collapse:""},creative:{halfpage:{url:"",id:"ajam_hp",width:"300",height:"600",clickTag:[""],backup:""},overlay:{url:"",id:"ajam_overlay",width:"1000",height:"600",clickTag:[""]}}},d=function(){var a,b,c,d,e="Shockwave",f="Flash",g=" 2.0",h=e+" "+f,i=e+f+".",j=new RegExp("^"+h+" (\\d+)");if((c=navigator.plugins)&&(d=c[h]||c[h+g])&&(b=d.description.match(j)))return b[1];if(window.ActiveXObject)for(a=10;a>0;a--)try{if(new ActiveXObject(i+i+a))return a}catch(k){}return 0}();b.prototype={configure:function(b){var d=this.config||c;this.config=a.extend(!0,d,b)},getHalfpage:function(){return this.swfCode(this.config.creative.halfpage)},renderHalfpage:function(){this.$overlayContainer.empty(),this.$hpContainer.html(this.hp)},getOverlay:function(){return this.swfCode(this.config.creative.overlay)},renderOverlay:function(){this.$hpContainer.empty(),this.$overlayContainer.html(this.overlay)},getBackupImage:function(b){return a('<a href="'+this.config.clickTrack+b.clickTag[0]+'" target="_blank">'+'<img src="'+b.backup+'" width="'+b.width+'" height="'+b.height+'" alt="Click here for more information" />'+"</a>")},renderBackupImage:function(){this.backupImage=this.backupImage||this.getBackupImage(this.config.creative.halfpage),this.$hpContainer.html(this.backupImage).addClass("collapsed").removeClass("expanded")},getFlashVars:function(a){var b,c=a.clickTag,d=c.length,e=[];for(b=0;d>b;b++)e.push("clickTag"+(b+1)+"="+this.config.clickTrackEsc+c[b]);return e.join("&")},swfCode:function(b){var c=this.getFlashVars(b);return a('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="'+b.width+'" height="'+b.height+'" id="'+b.id+'" align="middle">'+'<param name="movie" value="'+b.url+'" />'+'<param name="quality" value="high" />'+'<param name="bgcolor" value="#ffffff" />'+'<param name="play" value="true" />'+'<param name="loop" value="true" />'+'<param name="wmode" value="window" />'+'<param name="scale" value="showall" />'+'<param name="menu" value="true" />'+'<param name="devicefont" value="false" />'+'<param name="salign" value="" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="flashvars" value="'+c+'" />'+"<!--[if !IE]>-->"+'<object type="application/x-shockwave-flash" data="'+b.url+'" width="'+b.width+'" height="'+b.height+'">'+'<param name="movie" value="'+b.url+'" />'+'<param name="quality" value="high" />'+'<param name="bgcolor" value="#ffffff" />'+'<param name="play" value="true" />'+'<param name="loop" value="true" />'+'<param name="wmode" value="window" />'+'<param name="scale" value="showall" />'+'<param name="menu" value="true" />'+'<param name="devicefont" value="false" />'+'<param name="salign" value="" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="flashvars" value="'+c+'" />'+"</object>"+"<!--<![endif]-->"+"</object>")[0]},expand:function(a){a=!!a||!1,this.overlay=this.overlay||this.getOverlay(),this.renderOverlay(),this.$container.removeClass("collapsed").addClass("expanded"),a&&this.config.tracking.expand&&this.addPixel(this.config.tracking.expand)},collapse:function(a){a=!!a||!1,this.timerRunning&&clearTimeout(this.autoCloseTimer),this.hp=this.hp||this.getHalfpage(),this.renderHalfpage(),this.$container.removeClass("expanded").addClass("collapsed"),a&&this.config.tracking.collapse&&this.addPixel(this.config.tracking.collapse)},addPixel:function(b){b=b.replace(/\[random\]/i,Math.floor(1e5*Math.random())),a('<img src="'+b+'" width="1" height="1" alt="" />').css({display:"none"}).appendTo(this.$container)}},wpAd.Overlay=b}(window.jQuery);